<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Chainer::Training::Extensions::ExponentialShift
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Chainer::Training::Extensions::ExponentialShift";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>



    <!-- Additional settings for MathJax are from here. -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax:{
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
        }
      });
    </script>
    <script type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS_HTML">
    </script>
    <meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    <!-- Additional settings for MathJax are over here. -->

  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Training.html" title="Chainer::Training (module)">Training</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Extensions.html" title="Chainer::Training::Extensions (module)">Extensions</a></span></span>
     &raquo; 
    <span class="title">ExponentialShift</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Chainer::Training::Extensions::ExponentialShift
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Extension.html" title="Chainer::Training::Extension (class)">Chainer::Training::Extension</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Extension.html" title="Chainer::Training::Extension (class)">Chainer::Training::Extension</a></span></li>
          
            <li class="next">Chainer::Training::Extensions::ExponentialShift</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/chainer/training/extensions/exponential_shift.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Trainer extension to exponentially shift an optimizer attribute.</p>

<p>This extension exponentially increases or decreases the specified attribute of the optimizer. The typical use case is an exponential decay of the learning rate. This extension is also called before the training loop starts by default.</p>


  </div>
</div>
<div class="tags">
  

</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants inherited
     from <span class='object_link'><a href="../Extension.html" title="Chainer::Training::Extension (class)">Chainer::Training::Extension</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Extension.html#PRIORITY_EDITOR-constant" title="Chainer::Training::Extension::PRIORITY_EDITOR (constant)">Chainer::Training::Extension::PRIORITY_EDITOR</a></span>, <span class='object_link'><a href="../Extension.html#PRIORITY_READER-constant" title="Chainer::Training::Extension::PRIORITY_READER (constant)">Chainer::Training::Extension::PRIORITY_READER</a></span>, <span class='object_link'><a href="../Extension.html#PRIORITY_WRITER-constant" title="Chainer::Training::Extension::PRIORITY_WRITER (constant)">Chainer::Training::Extension::PRIORITY_WRITER</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_value-instance_method" title="#last_value (instance method)">#<strong>last_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute last_value.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Extension.html" title="Chainer::Training::Extension (class)">Chainer::Training::Extension</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Extension.html#name-instance_method" title="Chainer::Training::Extension#name (method)">#name</a></span>, <span class='object_link'><a href="../Extension.html#priority-instance_method" title="Chainer::Training::Extension#priority (method)">#priority</a></span>, <span class='object_link'><a href="../Extension.html#trigger-instance_method" title="Chainer::Training::Extension#trigger (method)">#trigger</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(trainer)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init-instance_method" title="#init (instance method)">#<strong>init</strong>(trainer)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(attr, rate, init: nil, target: nil, optimizer: nil)  &#x21d2; ExponentialShift </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of ExponentialShift.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize-instance_method" title="#serialize (instance method)">#<strong>serialize</strong>(serializer)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Extension.html" title="Chainer::Training::Extension (class)">Chainer::Training::Extension</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Extension.html#default_name-instance_method" title="Chainer::Training::Extension#default_name (method)">#default_name</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(attr, rate, init: nil, target: nil, optimizer: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Chainer::Training::Extensions::ExponentialShift (class)">ExponentialShift</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of ExponentialShift.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attr</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Name of the attribute to shift</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rate</span>
      
      
        <span class='type'>(<tt>float</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rate of the exponential shift.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>init</span>
      
      
        <span class='type'>(<tt>float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Initial value of the attribute.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target</span>
      
      
        <span class='type'>(<tt>float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Target value of the attribute.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>optimizer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Optimizer.html" title="Chainer::Optimizer (class)">Chainer::Optimizer</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Target optimizer to adjust the attribute.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/training/extensions/exponential_shift.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_rate'>rate</span><span class='comma'>,</span> <span class='label'>init:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>target:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>optimizer:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@attr</span> <span class='op'>=</span> <span class='id identifier rubyid_attr'>attr</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ExponentialShift does not support negative rate</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_rate'>rate</span> <span class='op'>&lt;</span> <span class='int'>0</span>
  <span class='ivar'>@rate</span> <span class='op'>=</span> <span class='id identifier rubyid_rate'>rate</span>
  <span class='ivar'>@init</span> <span class='op'>=</span> <span class='id identifier rubyid_init'>init</span>
  <span class='ivar'>@target</span> <span class='op'>=</span> <span class='id identifier rubyid_target'>target</span>
  <span class='ivar'>@optimizer</span> <span class='op'>=</span> <span class='id identifier rubyid_optimizer'>optimizer</span>
  <span class='ivar'>@t</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@last_value</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="last_value-instance_method">
  
    #<strong>last_value</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute last_value.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/training/extensions/exponential_shift.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_value'>last_value</span>
  <span class='ivar'>@last_value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="call-instance_method">
  
    #<strong>call</strong>(trainer)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/training/extensions/exponential_shift.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_trainer'>trainer</span><span class='rparen'>)</span>
  <span class='ivar'>@t</span> <span class='op'>+=</span> <span class='int'>1</span>

  <span class='id identifier rubyid_optimizer'>optimizer</span> <span class='op'>=</span> <span class='id identifier rubyid_get_optimizer'>get_optimizer</span><span class='lparen'>(</span><span class='id identifier rubyid_trainer'>trainer</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='ivar'>@init</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='ivar'>@rate</span> <span class='op'>**</span> <span class='ivar'>@t</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@target</span>
    <span class='kw'>if</span> <span class='ivar'>@rate</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>/</span> <span class='ivar'>@target</span> <span class='op'>&gt;</span> <span class='int'>1</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='ivar'>@target</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>/</span> <span class='ivar'>@target</span> <span class='op'>&lt;</span> <span class='int'>1</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='ivar'>@target</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_update_value'>update_value</span><span class='lparen'>(</span><span class='id identifier rubyid_optimizer'>optimizer</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init-instance_method">
  
    #<strong>init</strong>(trainer)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33
34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/training/extensions/exponential_shift.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span><span class='lparen'>(</span><span class='id identifier rubyid_trainer'>trainer</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_optimizer'>optimizer</span> <span class='op'>=</span> <span class='id identifier rubyid_get_optimizer'>get_optimizer</span><span class='lparen'>(</span><span class='id identifier rubyid_trainer'>trainer</span><span class='rparen'>)</span>
  <span class='ivar'>@init</span> <span class='op'>=</span> <span class='id identifier rubyid_optimizer'>optimizer</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='ivar'>@attr</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@init</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>if</span> <span class='ivar'>@last_value</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_update_value'>update_value</span><span class='lparen'>(</span><span class='id identifier rubyid_optimizer'>optimizer</span><span class='comma'>,</span> <span class='ivar'>@init</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_update_value'>update_value</span><span class='lparen'>(</span><span class='id identifier rubyid_optimizer'>optimizer</span><span class='comma'>,</span> <span class='ivar'>@last_value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="serialize-instance_method">
  
    #<strong>serialize</strong>(serializer)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/training/extensions/exponential_shift.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_serialize'>serialize</span><span class='lparen'>(</span><span class='id identifier rubyid_serializer'>serializer</span><span class='rparen'>)</span>
  <span class='ivar'>@t</span> <span class='op'>=</span> <span class='id identifier rubyid_serializer'>serializer</span><span class='period'>.</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@t</span><span class='rparen'>)</span>
  <span class='ivar'>@last_value</span> <span class='op'>=</span> <span class='id identifier rubyid_serializer'>serializer</span><span class='period'>.</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>last_value</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@last_value</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_array?'><span class='object_link'><a href="../../../Chainer.html#array%3F-class_method" title="Chainer.array? (method)">array?</a></span></span><span class='lparen'>(</span><span class='ivar'>@last_value</span><span class='rparen'>)</span>
    <span class='ivar'>@last_value</span> <span class='op'>=</span> <span class='ivar'>@last_value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Jan  5 21:42:23 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-3.0.3).
</div>

    </div>
  </body>
</html>
