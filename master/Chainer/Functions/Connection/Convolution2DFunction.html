<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Chainer::Functions::Connection::Convolution2DFunction
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Chainer::Functions::Connection::Convolution2DFunction";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>



    <!-- Additional settings for MathJax are from here. -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax:{
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
        }
      });
    </script>
    <script type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS_HTML">
    </script>
    <meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    <!-- Additional settings for MathJax are over here. -->

  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Functions.html" title="Chainer::Functions (module)">Functions</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Connection.html" title="Chainer::Functions::Connection (module)">Connection</a></span></span>
     &raquo; 
    <span class="title">Convolution2DFunction</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Chainer::Functions::Connection::Convolution2DFunction
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../FunctionNode.html" title="Chainer::FunctionNode (class)">Chainer::FunctionNode</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../../FunctionNode.html" title="Chainer::FunctionNode (class)">Chainer::FunctionNode</a></span></li>
          
            <li class="next">Chainer::Functions::Connection::Convolution2DFunction</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/chainer/functions/connection/convolution_2d.rb</dd>
  </dl>
  
</div>





  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cover_all-instance_method" title="#cover_all (instance method)">#<strong>cover_all</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute cover_all.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ph-instance_method" title="#ph (instance method)">#<strong>ph</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ph.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pw-instance_method" title="#pw (instance method)">#<strong>pw</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute pw.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sx-instance_method" title="#sx (instance method)">#<strong>sx</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute sx.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sy-instance_method" title="#sy (instance method)">#<strong>sy</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute sy.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../../FunctionNode.html" title="Chainer::FunctionNode (class)">Chainer::FunctionNode</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../FunctionNode.html#inputs-instance_method" title="Chainer::FunctionNode#inputs (method)">#inputs</a></span>, <span class='object_link'><a href="../../FunctionNode.html#outputs-instance_method" title="Chainer::FunctionNode#outputs (method)">#outputs</a></span>, <span class='object_link'><a href="../../FunctionNode.html#rank-instance_method" title="Chainer::FunctionNode#rank (method)">#rank</a></span></p>


  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#convolution_2d-class_method" title="convolution_2d (class method)">.<strong>convolution_2d</strong>(x, w, b: nil, stride: 1, pad: 0, cover_all: false)  &#x21d2; Chainer::Variable </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Two-dimensional convolution function.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#backward-instance_method" title="#backward (instance method)">#<strong>backward</strong>(indexes, grad_outputs)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#forward-instance_method" title="#forward (instance method)">#<strong>forward</strong>(inputs)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(stride: 1, pad: 0, cover_all: false)  &#x21d2; Convolution2DFunction </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Convolution2DFunction.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../../FunctionNode.html" title="Chainer::FunctionNode (class)">Chainer::FunctionNode</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../FunctionNode.html#apply-instance_method" title="Chainer::FunctionNode#apply (method)">#apply</a></span>, <span class='object_link'><a href="../../FunctionNode.html#backward_accumulate-instance_method" title="Chainer::FunctionNode#backward_accumulate (method)">#backward_accumulate</a></span>, <span class='object_link'><a href="../../FunctionNode.html#forward_cpu-instance_method" title="Chainer::FunctionNode#forward_cpu (method)">#forward_cpu</a></span>, <span class='object_link'><a href="../../FunctionNode.html#get_retained_inputs-instance_method" title="Chainer::FunctionNode#get_retained_inputs (method)">#get_retained_inputs</a></span>, <span class='object_link'><a href="../../FunctionNode.html#get_retained_outputs-instance_method" title="Chainer::FunctionNode#get_retained_outputs (method)">#get_retained_outputs</a></span>, <span class='object_link'><a href="../../FunctionNode.html#label-instance_method" title="Chainer::FunctionNode#label (method)">#label</a></span>, <span class='object_link'><a href="../../FunctionNode.html#output_data-instance_method" title="Chainer::FunctionNode#output_data (method)">#output_data</a></span>, <span class='object_link'><a href="../../FunctionNode.html#retain_inputs-instance_method" title="Chainer::FunctionNode#retain_inputs (method)">#retain_inputs</a></span>, <span class='object_link'><a href="../../FunctionNode.html#retain_outputs-instance_method" title="Chainer::FunctionNode#retain_outputs (method)">#retain_outputs</a></span>, <span class='object_link'><a href="../../FunctionNode.html#unchain-instance_method" title="Chainer::FunctionNode#unchain (method)">#unchain</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(stride: 1, pad: 0, cover_all: false)  &#x21d2; <tt><span class='object_link'><a href="" title="Chainer::Functions::Connection::Convolution2DFunction (class)">Convolution2DFunction</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Convolution2DFunction.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>stride:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>pad:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>cover_all:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@sy</span><span class='comma'>,</span> <span class='ivar'>@sx</span> <span class='op'>=</span> <span class='id identifier rubyid_stride'>stride</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_stride'>stride</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_stride'>stride</span><span class='comma'>,</span> <span class='id identifier rubyid_stride'>stride</span><span class='rbracket'>]</span>
  <span class='ivar'>@ph</span><span class='comma'>,</span> <span class='ivar'>@pw</span> <span class='op'>=</span> <span class='id identifier rubyid_pad'>pad</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_pad'>pad</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pad'>pad</span><span class='comma'>,</span> <span class='id identifier rubyid_pad'>pad</span><span class='rbracket'>]</span>
  <span class='ivar'>@cover_all</span> <span class='op'>=</span> <span class='id identifier rubyid_cover_all'>cover_all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="cover_all-instance_method">
  
    #<strong>cover_all</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute cover_all.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cover_all'>cover_all</span>
  <span class='ivar'>@cover_all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="ph-instance_method">
  
    #<strong>ph</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ph.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ph'>ph</span>
  <span class='ivar'>@ph</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="pw-instance_method">
  
    #<strong>pw</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute pw.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pw'>pw</span>
  <span class='ivar'>@pw</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="sx-instance_method">
  
    #<strong>sx</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute sx.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sx'>sx</span>
  <span class='ivar'>@sx</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="sy-instance_method">
  
    #<strong>sy</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute sy.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sy'>sy</span>
  <span class='ivar'>@sy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="convolution_2d-class_method">
  
    .<strong>convolution_2d</strong>(x, w, b: nil, stride: 1, pad: 0, cover_all: false)  &#x21d2; <tt><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Chainer::Variable</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Two-dimensional convolution function. This is an implementation of two-dimensional convolution in ConvNets. It takes three variables: the input image `x`, the filter weight `w`, and the bias vector `b`.</p>

<p>a notation for dimensionalities.</p>
<ul><li>
<p>:math:`n` is the batch size.</p>
</li><li>
<p>:math:`c_I` and :math:`c_O` are the number of the input and output channels, respectively.</p>
</li><li>
<p>:math:`h_I` and :math:`w_I` are the height and width of the input image, respectively.</p>
</li><li>
<p>:math:`h_K` and :math:`w_K` are the height and width of the filters, respectively.</p>
</li><li>
<p>:math:`h_P` and :math:`w_P` are the height and width of the spatial padding size, respectively.</p>
</li></ul>

<p>Then the `Convolution2D` function computes correlations between filters and patches of size :math:`(h_K, w_K)` in `x`. Patches are extracted at positions shifted by multiples of `stride` from the first position `(-h_P, -w_P)` for each spatial axis. The right-most (or bottom-most) patches do not run over the padded spatial size. Let :math:`(s_Y, s_X)` be the stride of filter application. Then, the output size :math:`(h_O, w_O)` is determined by the following equations:</p>

<p>math:</p>

<pre class="code ruby"><code class="ruby">h_O &amp;= (h_I + 2h_P - h_K) / s_Y + 1,\\\\
 w_O &amp;= (w_I + 2w_P - w_K) / s_X + 1.
</code></pre>

<p>If `cover_all` option is `true`, the filter will cover the all spatial locations. So, if the last stride of filter does not cover the end of spatial locations, an addtional stride will be applied to the end part of spatial locations. In this case, the output size :math:`(h_O, w_O)` is determined by the following equations:</p>

<p>math:</p>

<pre class="code ruby"><code class="ruby">h_O &amp;= (h_I + 2h_P - h_K + s_Y - 1) / s_Y + 1,\\\\
w_O &amp;= (w_I + 2w_P - w_K + s_X - 1) / s_X + 1.
</code></pre>

<p>If the bias vector is given, then it is added to all spatial locations of the output of convolution.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Chainer::Variable</a></span> or Numo::NArray or Cumo::NArray</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Input variable of shape :math:`(n, c_I, h_I, w_I)`.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>w</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Chainer::Variable</a></span> or Numo::NArray or Cumo::NArray</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Weight variable of shape :math:`(c_O, c_I, h_K, w_K)`.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>b</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Chainer::Variable</a></span> or Numo::NArray or Cumo::NArray</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Bias variable of length :math:`c_O`</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stride</span>
      
      
        <span class='type'>(<tt>Int or 2-D <span class='object_link'><a href="../Array.html" title="Chainer::Functions::Array (module)">Array</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>1</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Stride of filter applications. `stride=s` and `stride=(s, s)` are equivalent.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pad</span>
      
      
        <span class='type'>(<tt>Int or 2-D <span class='object_link'><a href="../Array.html" title="Chainer::Functions::Array (module)">Array</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Spatial padding width for input arrays.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cover_all</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If `true`, all spatial locations are convoluted into some output pixels.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Chainer::Variable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Output variable of shape :math:`(n, c_O, h_O, w_O)`.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 44</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_convolution_2d'>convolution_2d</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='label'>b:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>stride:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>pad:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>cover_all:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_func'>func</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>stride:</span> <span class='id identifier rubyid_stride'>stride</span><span class='comma'>,</span> <span class='label'>pad:</span> <span class='id identifier rubyid_pad'>pad</span><span class='comma'>,</span> <span class='label'>cover_all:</span> <span class='id identifier rubyid_cover_all'>cover_all</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_func'>func</span><span class='period'>.</span><span class='id identifier rubyid_apply'>apply</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="backward-instance_method">
  
    #<strong>backward</strong>(indexes, grad_outputs)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_backward'>backward</span><span class='lparen'>(</span><span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_grad_outputs'>grad_outputs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='id identifier rubyid_get_retained_inputs'>get_retained_inputs</span>
  <span class='id identifier rubyid_gy'>gy</span> <span class='op'>=</span> <span class='id identifier rubyid_grad_outputs'>grad_outputs</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

  <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_xh'>xh</span><span class='comma'>,</span> <span class='id identifier rubyid_xw'>xw</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_shape'>shape</span><span class='lbracket'>[</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_gx'>gx</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Deconvolution2DFunction.html" title="Chainer::Functions::Connection::Deconvolution2DFunction (class)">Deconvolution2DFunction</a></span></span><span class='period'>.</span><span class='id identifier rubyid_deconvolution_2d'><span class='object_link'><a href="Deconvolution2DFunction.html#deconvolution_2d-class_method" title="Chainer::Functions::Connection::Deconvolution2DFunction.deconvolution_2d (method)">deconvolution_2d</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_gy'>gy</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='label'>stride:</span> <span class='lbracket'>[</span><span class='ivar'>@sy</span><span class='comma'>,</span> <span class='ivar'>@sx</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>pad:</span> <span class='lbracket'>[</span><span class='ivar'>@ph</span><span class='comma'>,</span> <span class='ivar'>@pw</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>outsize:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_xh'>xh</span><span class='comma'>,</span> <span class='id identifier rubyid_xw'>xw</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_gx'>gx</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gw'>gw</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions.html" title="Chainer::Functions (module)">Functions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Connection.html" title="Chainer::Functions::Connection (module)">Connection</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Convolution2DGradW.html" title="Chainer::Functions::Connection::Convolution2DGradW (class)">Convolution2DGradW</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Convolution2DGradW.html#initialize-instance_method" title="Chainer::Functions::Connection::Convolution2DGradW#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_apply'><span class='object_link'><a href="../../FunctionNode.html#apply-instance_method" title="Chainer::FunctionNode#apply (method)">apply</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_gy'>gy</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_gw'>gw</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gb'>gb</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions.html" title="Chainer::Functions (module)">Functions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Math.html" title="Chainer::Functions::Math (module)">Math</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Math/Sum.html" title="Chainer::Functions::Math::Sum (class)">Sum</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sum'><span class='object_link'><a href="../Math/Sum.html#sum-class_method" title="Chainer::Functions::Math::Sum.sum (method)">sum</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_gy'>gy</span><span class='comma'>,</span> <span class='label'>axis:</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_gb'>gb</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="forward-instance_method">
  
    #<strong>forward</strong>(inputs)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/functions/connection/convolution_2d.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_forward'>forward</span><span class='lparen'>(</span><span class='id identifier rubyid_inputs'>inputs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_retain_inputs'>retain_inputs</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='id identifier rubyid_inputs'>inputs</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='id identifier rubyid_inputs'>inputs</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>3</span> <span class='op'>?</span> <span class='id identifier rubyid_inputs'>inputs</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_xm'>xm</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_array_module'><span class='object_link'><a href="../../../Chainer.html#get_array_module-class_method" title="Chainer.get_array_module (method)">get_array_module</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='id identifier rubyid_xm'>xm</span><span class='op'>::</span><span class='const'>NArray</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xm'>xm</span><span class='embexpr_end'>}</span><span class='tstring_content'>::NArray must not be used together w: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>, x: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xm'>xm</span><span class='embexpr_end'>}</span><span class='tstring_content'>::NArray must not be used together w: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>, x: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>, b: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_xm'>xm</span> <span class='op'>==</span> <span class='const'>Cumo</span> <span class='kw'>and</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../CUDA.html" title="Chainer::CUDA (module)">CUDA</a></span></span><span class='period'>.</span><span class='id identifier rubyid_cudnn_enabled?'><span class='object_link'><a href="../../CUDA.html#cudnn_enabled%3F-class_method" title="Chainer::CUDA.cudnn_enabled? (method)">cudnn_enabled?</a></span></span> <span class='kw'>and</span> <span class='op'>!</span><span class='ivar'>@cover_all</span>
    <span class='kw'>return</span> <span class='id identifier rubyid__forward_cudnn'>_forward_cudnn</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_kh'>kh</span><span class='comma'>,</span> <span class='id identifier rubyid_kw'>kw</span> <span class='op'>=</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_shape'>shape</span><span class='lbracket'>[</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_col'>col</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Utils.html" title="Chainer::Utils (module)">Utils</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Utils/Conv.html" title="Chainer::Utils::Conv (module)">Conv</a></span></span><span class='period'>.</span><span class='id identifier rubyid_im2col'><span class='object_link'><a href="../../Utils/Conv.html#im2col-class_method" title="Chainer::Utils::Conv.im2col (method)">im2col</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_kh'>kh</span><span class='comma'>,</span> <span class='id identifier rubyid_kw'>kw</span><span class='comma'>,</span> <span class='ivar'>@sy</span><span class='comma'>,</span> <span class='ivar'>@sx</span><span class='comma'>,</span> <span class='ivar'>@ph</span><span class='comma'>,</span> <span class='ivar'>@pw</span><span class='comma'>,</span> <span class='label'>cover_all:</span> <span class='ivar'>@cover_all</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Utils.html" title="Chainer::Utils (module)">Utils</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Utils/Math.html" title="Chainer::Utils::Math (module)">Math</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tensordot'><span class='object_link'><a href="../../Utils/Math.html#tensordot-class_method" title="Chainer::Utils::Math.tensordot (method)">tensordot</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_col'>col</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_cast_to'>cast_to</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span><span class='period'>.</span><span class='id identifier rubyid_transpose'>transpose</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='comment'># (N, oC, oH, oW)
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_y'>y</span> <span class='op'>+=</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_reshape'>reshape</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='lbracket'>[</span><span class='id identifier rubyid_y'>y</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jul 11 20:19:37 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.1).
</div>

    </div>
  </body>
</html>
