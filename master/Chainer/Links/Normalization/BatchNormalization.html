<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Chainer::Links::Normalization::BatchNormalization
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Chainer::Links::Normalization::BatchNormalization";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>



    <!-- Additional settings for MathJax are from here. -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax:{
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
        }
      });
    </script>
    <script type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS_HTML">
    </script>
    <meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    <!-- Additional settings for MathJax are over here. -->

  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Links.html" title="Chainer::Links (module)">Links</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Normalization.html" title="Chainer::Links::Normalization (module)">Normalization</a></span></span>
     &raquo; 
    <span class="title">BatchNormalization</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Chainer::Links::Normalization::BatchNormalization
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Link.html" title="Chainer::Link (class)">Chainer::Link</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../../Link.html" title="Chainer::Link (class)">Chainer::Link</a></span></li>
          
            <li class="next">Chainer::Links::Normalization::BatchNormalization</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/chainer/links/normalization/batch_normalization.rb</dd>
  </dl>
  
</div>







  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../../Link.html" title="Chainer::Link (class)">Chainer::Link</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Link.html#name-instance_method" title="Chainer::Link#name (method)">#name</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(x, finetune: false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Invokes the forward propagation of BatchNormalization.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(size, decay: 0.9, eps: 2e-5, dtype: nil, use_gamma: true, use_beta: true, initial_gamma: nil, initial_beta: nil)  &#x21d2; BatchNormalization </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Batch normalization layer on outputs of linear or convolution functions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_finetuning-instance_method" title="#start_finetuning (instance method)">#<strong>start_finetuning</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the population count for collecting population statistics.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../../Link.html" title="Chainer::Link (class)">Chainer::Link</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Link.html#cleargrads-instance_method" title="Chainer::Link#cleargrads (method)">#cleargrads</a></span>, <span class='object_link'><a href="../../Link.html#del_attr-instance_method" title="Chainer::Link#del_attr (method)">#del_attr</a></span>, <span class='object_link'><a href="../../Link.html#init_scope-instance_method" title="Chainer::Link#init_scope (method)">#init_scope</a></span>, <span class='object_link'><a href="../../Link.html#namedlinks-instance_method" title="Chainer::Link#namedlinks (method)">#namedlinks</a></span>, <span class='object_link'><a href="../../Link.html#namedparams-instance_method" title="Chainer::Link#namedparams (method)">#namedparams</a></span>, <span class='object_link'><a href="../../Link.html#params-instance_method" title="Chainer::Link#params (method)">#params</a></span>, <span class='object_link'><a href="../../Link.html#register_persistent-instance_method" title="Chainer::Link#register_persistent (method)">#register_persistent</a></span>, <span class='object_link'><a href="../../Link.html#serialize-instance_method" title="Chainer::Link#serialize (method)">#serialize</a></span>, <span class='object_link'><a href="../../Link.html#set_attr-instance_method" title="Chainer::Link#set_attr (method)">#set_attr</a></span>, <span class='object_link'><a href="../../Link.html#within_init_scope-instance_method" title="Chainer::Link#within_init_scope (method)">#within_init_scope</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(size, decay: 0.9, eps: 2e-5, dtype: nil, use_gamma: true, use_beta: true, initial_gamma: nil, initial_beta: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Chainer::Links::Normalization::BatchNormalization (class)">BatchNormalization</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Batch normalization layer on outputs of linear or convolution functions.</p>

<p>It runs in three modes: training mode, fine-tuning mode, and testing mode. In training mode, it normalizes the input by *batch statistics*. It also maintains approximated population statistics by moving averages, which can be used for instant evaluation in testing mode.</p>

<p>In fine-tuning mode, it accumulates the input to compute *population statistics*. In order to correctly compute the population statistics, a user must use this mode to feed mini-batches running through whole training dataset.</p>

<p>In testing mode, it uses pre-computed population statistics to normalize the input variable. The population statistics is approximated if it is computed by training mode, or accurate if it is correctly computed by fine-tuning mode.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>integer or int array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Size (or shape) of channel dimensions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>decay</span>
      
      
        <span class='type'>(<tt>float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0.9</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Decay rate of moving average. It is used on training.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>eps</span>
      
      
        <span class='type'>(<tt>float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>2e-5</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Epsilon value for numerical stability.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dtype</span>
      
      
        <span class='type'>(<tt>Numo::NArray.dtype or Cumo::NArray.dtype</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Type to use in computing.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>use_gamma</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If `true`, use scaling parameter. Otherwise, use unit(1) which makes no effect.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>use_beta</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If `true`, use shifting parameter. Otherwise, use unit(0) which makes no effect.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/links/normalization/batch_normalization.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>decay:</span> <span class='float'>0.9</span><span class='comma'>,</span> <span class='label'>eps:</span> <span class='float'>2e-5</span><span class='comma'>,</span> <span class='label'>dtype:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>use_gamma:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>use_beta:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>initial_gamma:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>initial_beta:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dtype'>dtype</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Device.html" title="Chainer::Device (module)">Device</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default'><span class='object_link'><a href="../../Device.html#default-class_method" title="Chainer::Device.default (method)">default</a></span></span><span class='period'>.</span><span class='id identifier rubyid_xm'><span class='object_link'><a href="../../AbstractDevice.html#xm-instance_method" title="Chainer::AbstractDevice#xm (method)">xm</a></span></span><span class='op'>::</span><span class='const'>SFloat</span>
  <span class='ivar'>@avg_mean</span> <span class='op'>=</span> <span class='id identifier rubyid_dtype'>dtype</span><span class='period'>.</span><span class='id identifier rubyid_zeros'>zeros</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_register_persistent'>register_persistent</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avg_mean</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@avg_var</span> <span class='op'>=</span> <span class='id identifier rubyid_dtype'>dtype</span><span class='period'>.</span><span class='id identifier rubyid_zeros'>zeros</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_register_persistent'>register_persistent</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avg_var</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@n</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_register_persistent'>register_persistent</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@decay</span> <span class='op'>=</span> <span class='id identifier rubyid_decay'>decay</span>
  <span class='ivar'>@eps</span> <span class='op'>=</span> <span class='id identifier rubyid_eps'>eps</span>

  <span class='id identifier rubyid_init_scope'>init_scope</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_use_gamma'>use_gamma</span>
      <span class='id identifier rubyid_initial_gamma'>initial_gamma</span> <span class='op'>=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_initial_gamma'>initial_gamma</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_initial_gamma'>initial_gamma</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Initializers.html" title="Chainer::Initializers (module)">Initializers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_initializer'><span class='object_link'><a href="../../Initializers.html#get_initializer-class_method" title="Chainer::Initializers.get_initializer (method)">get_initializer</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_initial_gamma'>initial_gamma</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_initial_gamma'>initial_gamma</span><span class='period'>.</span><span class='id identifier rubyid_dtype'>dtype</span> <span class='op'>=</span> <span class='id identifier rubyid_dtype'>dtype</span>
      <span class='ivar'>@gamma</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Parameter.html" title="Chainer::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Parameter.html#initialize-instance_method" title="Chainer::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='label'>initializer:</span> <span class='id identifier rubyid_initial_gamma'>initial_gamma</span><span class='comma'>,</span> <span class='label'>shape:</span> <span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_use_beta'>use_beta</span>
      <span class='id identifier rubyid_initial_beta'>initial_beta</span> <span class='op'>=</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_initial_beta'>initial_beta</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_initial_beta'>initial_beta</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Initializers.html" title="Chainer::Initializers (module)">Initializers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_initializer'><span class='object_link'><a href="../../Initializers.html#get_initializer-class_method" title="Chainer::Initializers.get_initializer (method)">get_initializer</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_initial_beta'>initial_beta</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_initial_beta'>initial_beta</span><span class='period'>.</span><span class='id identifier rubyid_dtype'>dtype</span> <span class='op'>=</span> <span class='id identifier rubyid_dtype'>dtype</span>
      <span class='ivar'>@beta</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Parameter.html" title="Chainer::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Parameter.html#initialize-instance_method" title="Chainer::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='label'>initializer:</span> <span class='id identifier rubyid_initial_beta'>initial_beta</span><span class='comma'>,</span> <span class='label'>shape:</span> <span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="call-instance_method">
  
    #<strong>call</strong>(x, finetune: false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Invokes the forward propagation of BatchNormalization. In training mode, the BatchNormalization computes moving averages of mean and variance for evaluatino during training, and normalizes the input using batch statistics. BatchNormalization runs in fine-tuning mode; it accumulates the input array to compute population statistics for normalization, and normalizes the input using batch statistics.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Chainer::Variable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Input variable.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>finetune</span>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If it is in the training mode and `finetune` is `True`,</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/links/normalization/batch_normalization.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='label'>finetune:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_defined?'>instance_variable_defined?</span><span class='lparen'>(</span><span class='symbol'>:@gamma</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gamma'>gamma</span> <span class='op'>=</span> <span class='ivar'>@gamma</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_gamma'>gamma</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Variable</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Variable.html#initialize-instance_method" title="Chainer::Variable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_ones'>ones</span><span class='lparen'>(</span><span class='ivar'>@avg_mean</span><span class='period'>.</span><span class='id identifier rubyid_shape'>shape</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_defined?'>instance_variable_defined?</span><span class='lparen'>(</span><span class='symbol'>:@beta</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_beta'>beta</span> <span class='op'>=</span> <span class='ivar'>@beta</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_beta'>beta</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Variable</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Variable.html#initialize-instance_method" title="Chainer::Variable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_zeros'>zeros</span><span class='lparen'>(</span><span class='op'>*</span><span class='ivar'>@avg_mean</span><span class='period'>.</span><span class='id identifier rubyid_shape'>shape</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_configuration'><span class='object_link'><a href="../../../Chainer.html#configuration-class_method" title="Chainer.configuration (method)">configuration</a></span></span><span class='period'>.</span><span class='id identifier rubyid_train'>train</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_finetune'>finetune</span>
      <span class='ivar'>@n</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_decay'>decay</span> <span class='op'>=</span> <span class='float'>1.0</span> <span class='op'>-</span> <span class='float'>1.0</span> <span class='op'>/</span> <span class='ivar'>@n</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_decay'>decay</span> <span class='op'>=</span> <span class='ivar'>@decay</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions.html" title="Chainer::Functions (module)">Functions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions/Normalization.html" title="Chainer::Functions::Normalization (module)">Normalization</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions/Normalization/BatchNormalization.html" title="Chainer::Functions::Normalization::BatchNormalization (class)">BatchNormalization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_batch_normalization'><span class='object_link'><a href="../../Functions/Normalization/BatchNormalization.html#batch_normalization-class_method" title="Chainer::Functions::Normalization::BatchNormalization.batch_normalization (method)">batch_normalization</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_gamma'>gamma</span><span class='comma'>,</span> <span class='id identifier rubyid_beta'>beta</span><span class='comma'>,</span> <span class='label'>eps:</span> <span class='ivar'>@eps</span><span class='comma'>,</span> <span class='label'>running_mean:</span> <span class='ivar'>@avg_mean</span><span class='comma'>,</span> <span class='label'>running_var:</span> <span class='ivar'>@avg_var</span><span class='comma'>,</span> <span class='label'>decay:</span> <span class='id identifier rubyid_decay'>decay</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_mean'>mean</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Variable</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Variable.html#initialize-instance_method" title="Chainer::Variable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@avg_mean</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_var'>var</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Variable.html" title="Chainer::Variable (class)">Variable</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Variable.html#initialize-instance_method" title="Chainer::Variable#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@avg_var</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Chainer.html" title="Chainer (module)">Chainer</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions.html" title="Chainer::Functions (module)">Functions</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions/Normalization.html" title="Chainer::Functions::Normalization (module)">Normalization</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Functions/Normalization/FixedBatchNormalization.html" title="Chainer::Functions::Normalization::FixedBatchNormalization (class)">FixedBatchNormalization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fixed_batch_normalization'><span class='object_link'><a href="../../Functions/Normalization/FixedBatchNormalization.html#fixed_batch_normalization-class_method" title="Chainer::Functions::Normalization::FixedBatchNormalization.fixed_batch_normalization (method)">fixed_batch_normalization</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_gamma'>gamma</span><span class='comma'>,</span> <span class='id identifier rubyid_beta'>beta</span><span class='comma'>,</span> <span class='id identifier rubyid_mean'>mean</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span><span class='comma'>,</span> <span class='label'>eps:</span> <span class='ivar'>@eps</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_finetuning-instance_method">
  
    #<strong>start_finetuning</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the population count for collecting population statistics. This method can be skipped if it is the first time to use the fine-tuning mode. Otherwise, this method should be called before starting the fine-tuning mode again.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chainer/links/normalization/batch_normalization.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_finetuning'>start_finetuning</span>
  <span class='ivar'>@n</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jul 11 20:19:38 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.1).
</div>

    </div>
  </body>
</html>
